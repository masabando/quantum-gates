{"version":3,"sources":["../src/Complex/index.ts","../src/QMatrix/index.ts","../src/Constant/index.ts","../src/QState/index.ts","../src/QGate/index.ts","../src/CPList/index.ts","../src/QTool/index.ts"],"names":["_","error"],"mappings":"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","file":"index.mjs","sourcesContent":["export default class Complex {\n  realPart: number;\n  imaginaryPart: number;\n\n  constructor(realPart: number, imaginaryPart: number) {\n    this.realPart = realPart;\n    this.imaginaryPart = imaginaryPart;\n  }\n\n  add(other: Complex): Complex {\n    return new Complex(\n      this.realPart + other.realPart,\n      this.imaginaryPart + other.imaginaryPart\n    );\n  }\n\n  multiply(other: Complex): Complex {\n    return new Complex(\n      this.realPart * other.realPart - this.imaginaryPart * other.imaginaryPart,\n      this.realPart * other.imaginaryPart + this.imaginaryPart * other.realPart\n    );\n  }\n\n  scale(scalar: number): Complex {\n    return new Complex(this.realPart * scalar, this.imaginaryPart * scalar);\n  }\n\n  toString(digits?: number): string {\n    if (digits !== undefined) {\n      return `${this.realPart.toFixed(digits)} + ${this.imaginaryPart.toFixed(digits)}i`;\n    } else {\n      return `${this.realPart} + ${this.imaginaryPart}i`;\n    }\n  }\n\n  magnitude(): number {\n    return Math.sqrt(this.realPart ** 2 + this.imaginaryPart ** 2);\n  }\n\n  conjugate(): Complex {\n    return new Complex(this.realPart, -this.imaginaryPart);\n  }\n}\n\n","import Complex from \"../Complex\"\n\nexport default class QMatrix {\n  matrix: Complex[][];\n\n  constructor(matrix: (number | Complex)[][]) {\n    this.matrix = matrix.map(row =>\n      row.map(value =>\n        value instanceof Complex ? value : new Complex(value, 0)\n      )\n    );\n  }\n\n  get rows(): number {\n    return this.matrix.length;\n  }\n  \n  get cols(): number {\n    return this.matrix[0].length;\n  }\n\n  add(other: QMatrix): QMatrix {\n    if (this.rows !== other.rows || this.cols !== other.cols) {\n      throw new Error(\"Matrices must have the same dimensions for addition\");\n    }\n\n    const result = this.matrix.map((row, i) =>\n      row.map((value, j) => value.add(other.matrix[i][j]))\n    );\n\n    return new QMatrix(result);\n  }\n\n  multiply(other: QMatrix): QMatrix {\n    if (this.cols !== other.rows) {\n      throw new Error(\"Incompatible matrix sizes for multiplication\");\n    }\n\n    const result: Complex[][] = Array.from({ length: this.rows }, () =>\n      Array.from({ length: other.cols }, () => new Complex(0, 0))\n    );\n    \n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < other.cols; j++) {\n        for (let k = 0; k < this.cols; k++) {\n          result[i][j] = result[i][j].add(this.matrix[i][k].multiply(other.matrix[k][j]));\n        }\n      }\n    }\n\n    return new QMatrix(result);\n  }\n\n\n  toString(digits?: number): string {\n    return this.matrix\n      .map(row => row.map(value => value.toString(digits)).join(\"\\t\"))\n      .join(\"\\n\");\n  }\n\n  scale(scalar: Complex | number): QMatrix {\n    const scalarComplex = scalar instanceof Complex ? scalar : new Complex(scalar, 0);\n    const result = this.matrix.map(row =>\n      row.map(value => value.multiply(scalarComplex))\n    );\n    return new QMatrix(result);\n  }\n\n  conjugate(): QMatrix {\n    const result = this.matrix.map(row =>\n      row.map(value => value.conjugate())\n    );\n    return new QMatrix(result);\n  }\n\n  transpose(): QMatrix {\n    const result: Complex[][] = Array.from({ length: this.cols }, () =>\n      Array.from({ length: this.rows }, () => new Complex(0, 0))\n    );\n\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.cols; j++) {\n        result[j][i] = this.matrix[i][j];\n      }\n    }\n\n    return new QMatrix(result);\n  }\n\n  dagger(): QMatrix {\n    return this.conjugate().transpose();\n  }\n\n  trace(): Complex {\n    let trace = new Complex(0, 0);\n    for (let i = 0; i < Math.min(this.rows, this.cols); i++) {\n      trace = trace.add(this.matrix[i][i]);\n    }\n    return trace;\n  }\n\n}","import Complex from \"../Complex\";\nimport QMatrix from \"../QMatrix\";\n// import QGate from \"../QGate\";\n\nexport default class Constant {\n  static readonly PI = Math.PI;\n  static readonly E = Math.E;\n  // identity matrix for 2x2\n  static readonly IDENTITY_2x2 = new QMatrix([\n    [1, 0],\n    [0, 1],\n  ]);\n  // identity matrix for 3x3\n  static readonly IDENTITY_3x3 = new QMatrix([\n    [1, 0, 0],\n    [0, 1, 0],\n    [0, 0, 1],\n  ]);\n  // identity matrix for 4x4\n  static readonly IDENTITY_4x4 = new QMatrix([\n    [1, 0, 0, 0],\n    [0, 1, 0, 0],\n    [0, 0, 1, 0],\n    [0, 0, 0, 1],\n  ]);\n\n  static readonly identity = (dim: number) => {\n    return new QMatrix(\n      Array.from({ length: dim }, (_, i) =>\n        Array.from({ length: dim }, (_, j) => (i === j ? 1 : 0))\n      )\n    );\n  };\n\n  static readonly zero = (dim: number) => {\n    return new QMatrix(\n      Array.from({ length: dim }, () =>\n        Array.from({ length: dim }, () => 0)\n      )\n    );\n  };\n\n  // zero matrix for 2x2\n  static readonly ZERO_2x2 = new QMatrix([\n    [0, 0],\n    [0, 0],\n  ]);\n  // zero matrix for 3x3\n  static readonly ZERO_3x3 = new QMatrix([\n    [0, 0, 0],\n    [0, 0, 0],\n    [0, 0, 0],\n  ]);\n  // zero matrix for 4x4\n  static readonly ZERO_4x4 = new QMatrix([\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ]);\n\n  // common complex numbers\n  static readonly COMPLEX_I = new Complex(0, 1);\n  static readonly COMPLEX_ONE = new Complex(1, 0);\n  static readonly COMPLEX_ZERO = new Complex(0, 0);\n\n  // pauli matrices\n  static readonly PAULI_X = new QMatrix([\n    [0, 1],\n    [1, 0],\n  ]);\n  static readonly PAULI_Y = new QMatrix([\n    [new Complex(0, 0), new Complex(0, -1)],\n    [new Complex(0, 1), new Complex(0, 0)],\n  ]);\n  static readonly PAULI_Z = new QMatrix([\n    [1, 0],\n    [0, -1],\n  ]);\n\n  //static readonly NOT_GATE = new QGate(Math.PI, [1, 0, 0]);\n}","import Complex from \"../Complex\";\nimport QMatrix from \"../QMatrix\";\nimport Constant from \"../Constant\";\n\nexport default class QState {\n  vector: Complex[];\n  column: boolean = true;\n\n  constructor(vector: number[] | Complex[], column: boolean = true) {\n    this.column = column;\n    this.vector = vector.map(value =>\n      value instanceof Complex ? value : new Complex(value, 0)\n    );\n  }\n\n  toString(digit: number): string {\n    return `[${this.vector.map(value => value.toString(digit)).join(this.column ? \"\\n\" : \", \")}]`;\n  }\n\n  scale(scalar: Complex | number): QState {\n    const factor = scalar instanceof Complex ? scalar : new Complex(scalar, 0);\n    const scaledVector = this.vector.map(value => value.multiply(factor));\n    return new QState(scaledVector, this.column);\n  }\n\n  magnitude(): number {\n    let sum = 0;\n    for (const value of this.vector) {\n      sum += value.magnitude() ** 2;\n    }\n    return Math.sqrt(sum);\n  }\n\n  normalize(): QState {\n    const mag = this.magnitude();\n    if (mag === 0) {\n      throw new Error(\"Cannot normalize a zero vector\");\n    }\n    return this.scale(1 / mag);\n  }\n\n\n  transpose(): QState {\n    return new QState(this.vector, !this.column);\n  }\n\n  conjugate(): QState {\n    const conjugatedVector = this.vector.map(value => value.conjugate());\n    return new QState(conjugatedVector, this.column);\n  }\n\n  dagger(): QState {\n    return this.conjugate().transpose();\n  }\n\n  get isColumn(): boolean {\n    return this.column;\n  }\n\n  get values(): Complex[] | Complex[][] {\n    return this.vector;\n  }\n\n  applyMatrix(matrix: QMatrix): QState {\n    if (this.column) {\n      throw new Error(\"Matrix application is only defined for row vectors\");\n    }\n    if (matrix.cols !== this.vector.length) {\n      throw new Error(\"Incompatible sizes for matrix application\");\n    }\n\n    const result: Complex[] = Array.from({ length: matrix.rows }, () => new Complex(0, 0));\n\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.cols; j++) {\n        result[i] = result[i].add(matrix.matrix[j][i].multiply(this.vector[j]));\n      }\n    }\n\n    return new QState(result, false);\n  }\n\n  // <v1|v2>\n  applyState(state: QState): Complex {\n    if (this.column || !state.column) {\n      throw new Error(\"Incompatible sizes for state application\");\n    }\n    if (this.vector.length !== state.vector.length) {\n      throw new Error(\"State vectors must be of the same length for application\");\n    }\n\n    let result = new Complex(0, 0);\n    for (let i = 0; i < this.vector.length; i++) {\n      result = result.add(this.vector[i].multiply(state.vector[i]));\n    }\n\n    return result;\n  }\n\n  get xyz(): { x: number; y: number; z: number } {\n    if (!this.column) {\n      throw new Error(\"State vector must be a column vector to compute xyz coordinates\");\n    }\n    const dagger = this.dagger();\n    const x = dagger.applyMatrix(Constant.PAULI_X).applyState(this).realPart;\n    const y = dagger.applyMatrix(Constant.PAULI_Y).applyState(this).realPart;\n    const z = dagger.applyMatrix(Constant.PAULI_Z).applyState(this).realPart;\n\n    return { x, y, z };\n  }\n}\n","import Complex from \"../Complex\";\nimport QMatrix from \"../QMatrix\";\nimport QState from \"../QState\";\nimport Constant from \"../Constant\";\n\nexport default class QGate {\n  matrix: QMatrix;\n\n  constructor(theta: number = 0, n: [number, number, number] = [1, 0, 0]) {\n    const [nx, ny, nz] = n;\n    const magnitude = Math.sqrt(nx * nx + ny * ny + nz * nz);\n    if (magnitude === 0) {\n      throw new Error(\"Rotation axis vector cannot be zero\");\n    }\n    const [ux, uy, uz] = [nx / magnitude, ny / magnitude, nz / magnitude];\n    const cos = Math.cos(theta / 2);\n    const sin = -Math.sin(theta / 2);\n\n    const realPart = Constant.IDENTITY_2x2\n      .scale(new Complex(cos, 0))\n    const imaginaryPartX = Constant.PAULI_X\n      .scale(new Complex(0, ux * sin));\n    const imaginaryPartY = Constant.PAULI_Y\n      .scale(new Complex(0, uy * sin));\n    const imaginaryPartZ = Constant.PAULI_Z\n      .scale(new Complex(0, uz * sin));\n    this.matrix = realPart\n      .add(imaginaryPartX)\n      .add(imaginaryPartY)\n      .add(imaginaryPartZ);\n  }\n\n  setMatrix(matrix: QMatrix): QGate {\n    this.matrix = matrix;\n    return this;\n  }\n\n  dagger(): QGate {\n    const m = this.matrix.dagger();\n    const gate = new QGate(0, [1, 0, 0]); // temporary values\n    gate.setMatrix(m);\n    return gate;\n  }\n\n  conjugate(): QGate {\n    const m = this.matrix.conjugate();\n    const gate = new QGate(0, [1, 0, 0]); // temporary values\n    gate.setMatrix(m);\n    return gate;\n  }\n\n  transpose(): QGate {\n    const m = this.matrix.transpose();\n    const gate = new QGate(0, [1, 0, 0]); // temporary values\n    gate.setMatrix(m);\n    return gate;\n  }\n\n  apply(stateVector: QState): QState {\n    const resultVector = new Array<Complex>(this.matrix.rows).fill(new Complex(0, 0));\n\n    for (let i = 0; i < this.matrix.rows; i++) {\n      for (let j = 0; j < this.matrix.cols; j++) {\n        resultVector[i] = resultVector[i].add(\n          this.matrix.matrix[i][j].multiply(stateVector.vector[j])\n        );\n      }\n    }\n    return new QState(resultVector);\n  }\n\n  multiply(other: QGate): QGate {\n    const m = this.matrix.multiply(other.matrix);\n    const gate = new QGate(0, [1, 0, 0]); // temporary values\n    gate.setMatrix(m);\n    return gate;\n  }\n\n  trace(): Complex {\n    return this.matrix.trace();\n  }\n\n  fidelity(ideal: QGate): number {\n    const dim = this.matrix.rows;\n    const product = this.matrix.dagger().multiply(ideal.matrix);\n    const trace = product.trace();\n    const fidelity = trace.magnitude() / dim;\n    return fidelity;\n  }\n}","type RobustType = \"ple\" | \"ore\" | \"both\";\ntype Rep = \"ple\" | \"ore\" | false;\n\ntype Pulse = {\n  theta: (_theta: number, _phi: number) => number;\n  phi: (_theta: number, _phi: number) => number;\n  canReduce?: boolean;\n};\n\ntype CP = {\n  name: string;\n  robustType?: RobustType;\n  rep?: Rep;\n  pulse: Pulse[];\n}\n\n\nconst CPList: Record<string, CP> = {\n  plain: {\n    name: \"plain\",\n    pulse: [\n      {\n        theta: (_theta: number, _phi: number) => _theta,\n        phi: (_theta: number, _phi: number) => _phi\n      }\n    ]\n  },\n  BB1: {\n    name: \"BB1\",\n    robustType: \"ple\",\n    rep: \"ore\",\n    pulse: [\n      {\n        canReduce: true,\n        theta: (_theta: number, _phi: number) => Math.PI,\n        phi: (_theta: number, _phi: number) => _phi + Math.acos(-_theta / (4 * Math.PI)),\n      },\n      {\n        canReduce: true,\n        theta: (_theta: number, _phi: number) => 2 * Math.PI,\n        phi: (_theta: number, _phi: number) => 3 * (_phi + Math.acos(-_theta / (4 * Math.PI))) - 2 * _phi,\n      },\n      {\n        canReduce: true,\n        theta: (_theta: number, _phi: number) => Math.PI,\n        phi: (_theta: number, _phi: number) => _phi + Math.acos(-_theta / (4 * Math.PI)),\n      },\n      {\n        theta: (_theta: number, _phi: number) => _theta,\n        phi: (_theta: number, _phi: number) => _phi,\n      }\n    ]\n  },\n  SK1: {\n    name: \"SK1\",\n    robustType: \"ple\",\n    rep: \"ore\",\n    pulse: [\n      {\n        theta: (_theta: number, _phi: number) => _theta,\n        phi: (_theta: number, _phi: number) => _phi,\n      },\n      {\n        canReduce: true,\n        theta: (_theta: number, _phi: number) => 2 * Math.PI,\n        phi: (_theta: number, _phi: number) => _phi - Math.acos(-_theta / (4 * Math.PI)),\n      },\n      {\n        canReduce: true,\n        theta: (_theta: number, _phi: number) => 2 * Math.PI,\n        phi: (_theta: number, _phi: number) => _phi + Math.acos(-_theta / (4 * Math.PI)),\n      }\n    ]\n  },\n  CORPSE: {\n    name: \"CORPSE\",\n    robustType: \"ore\",\n    rep: \"ple\",\n    pulse: [\n      {\n        theta: (_theta: number, _phi: number) => 2 * Math.PI + _theta / 2 - Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi,\n      },\n      {\n        theta: (_theta: number, _phi: number) => 2 * Math.PI - 2 * Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi + Math.PI,\n      },\n      {\n        theta: (_theta: number, _phi: number) => _theta / 2 - Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi,\n      }\n    ]\n  },\n  shortCORPSE: {\n    name: \"shortCORPSE\",\n    robustType: \"ore\",\n    rep: false,\n    pulse: [\n      {\n        theta: (_theta: number, _phi: number) => _theta / 2 - Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi,\n      },\n      {\n        theta: (_theta: number, _phi: number) => 2 * Math.PI - 2 * Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi + Math.PI,\n      },\n      {\n        theta: (_theta: number, _phi: number) => _theta / 2 - Math.asin(Math.sin(_theta / 2) / 2),\n        phi: (_theta: number, _phi: number) => _phi,\n      }\n    ]\n  },\n}\n\nfunction concatenate(pulseA: string, pulseB: string, reduced: boolean = false): Pulse[] {\n  return CPList[pulseB].pulse.map((pulseBElement) => {\n    if (reduced && pulseBElement.canReduce) {\n      return pulseBElement;\n    } else {\n      return CPList[pulseA].pulse.map((pulseAElement) => {\n        return {\n          theta: (_theta: number, _phi: number) => pulseAElement.theta(\n            pulseBElement.theta(_theta, _phi),\n            pulseBElement.phi(_theta, _phi)\n          ),\n          phi: (_theta: number, _phi: number) => pulseAElement.phi(\n            pulseBElement.theta(_theta, _phi),\n            pulseBElement.phi(_theta, _phi)\n          ),\n        };\n      });\n    }\n  }).flat()\n}\n\nfunction createCCCP(pulseA: string, pulseB: string, reduced: boolean = false): CP {\n  return {\n    name: `${reduced ? \"reduced \" : \"\"}${pulseA}/${pulseB}`,\n    robustType: \"both\",\n    rep: false,\n    pulse: concatenate(pulseA, pulseB, reduced)\n  }\n}\n\nCPList[\"CORPSE/SK1\"] = createCCCP(\"CORPSE\", \"SK1\");\nCPList[\"SK1/CORPSE\"] = createCCCP(\"SK1\", \"CORPSE\");\nCPList[\"CORPSE/BB1\"] = createCCCP(\"CORPSE\", \"BB1\");\nCPList[\"BB1/CORPSE\"] = createCCCP(\"BB1\", \"CORPSE\");\nCPList[\"reduced CORPSE/SK1\"] = createCCCP(\"CORPSE\", \"SK1\", true);\nCPList[\"reduced CORPSE/BB1\"] = createCCCP(\"CORPSE\", \"BB1\", true);\n\n\n// console.log(CPList);\n\nexport default CPList;","import QGate from \"../QGate\";\nimport CPList from \"../CPList\";\n\ntype Target = string | HTMLElement | null | undefined;\n\n\ntype Pulse = {\n  theta: (_theta: number, _phi: number) => number;\n  phi: (_theta: number, _phi: number) => number;\n  canReduce?: boolean;\n};\n\nexport default class QTool {\n  static evalGate(pulse: Pulse[], theta: number, phi: number, ple: number, ore: number): QGate {\n    let gate = new QGate();\n    pulse.map(p => {\n      const th = p.theta(theta, phi);\n      const ph = p.phi(theta, phi);\n      return new QGate(th * (1 + ple), [Math.cos(ph), Math.sin(ph), ore]);\n    }).reverse().forEach(g => {\n      gate = gate.multiply(g);\n    })\n    return gate;\n  }\n\n  static createCanvas2D(targetId: Target, { width = 400, height = 400 }: { width?: number; height?: number } = {}): { canvas: HTMLCanvasElement; ctx: CanvasRenderingContext2D | null; clearCanvas: () => void } {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    canvas.style.aspectRatio = (width / height).toString();\n    canvas.style.maxWidth = \"100%\";\n    const t = typeof targetId === \"string\" ? document.querySelector(`${targetId}`) : targetId;\n    if (!t) {\n      throw new Error(`Target element with id \"${targetId}\" not found.`);\n    }\n    t.appendChild(canvas);\n    const ctx = canvas.getContext(\"2d\");\n    const clearCanvas = () => {\n      ctx?.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    return { canvas, ctx, clearCanvas };\n  }\n\n  static createErrorList(errorRange: { ple: { min: number; max: number; step: number }; ore: { min: number; max: number; step: number } } = {\n    ple: { min: -0.1, max: 0.1, step: 0.001 },\n    ore: { min: -0.1, max: 0.1, step: 0.001 },\n  }): { ple: number; ore: number }[][] {\n    const N = {\n      ple: Math.floor((errorRange.ple.max - errorRange.ple.min) / errorRange.ple.step) + 1,\n      ore: Math.floor((errorRange.ore.max - errorRange.ore.min) / errorRange.ore.step) + 1,\n    }\n    const errorList = [];\n    for (let i = 0; i < N.ple; i++) {\n      const l = [];\n      for (let j = 0; j < N.ore; j++) {\n        l.push({\n          ple: errorRange.ple.min + i * errorRange.ple.step,\n          ore: errorRange.ore.min + j * errorRange.ore.step,\n        });\n      }\n      errorList.push(l);\n    }\n    return errorList;\n  }\n\n  static calculateFidelity(\n    gateName: string,\n    theta: number,\n    phi: number,\n    error: { ple: { min: number; max: number; step: number }; ore: { min: number; max: number; step: number } } = {\n      ple: { min: -0.1, max: 0.1, step: 0.001 },\n      ore: { min: -0.1, max: 0.1, step: 0.001 },\n    }): { errorList: { ple: number; ore: number }[][]; fidelityList: { fidelity: number; pleIdx: number; oreIdx: number }[] } {\n    const CompositeGate = CPList[gateName].pulse;\n    const plain = CPList.plain.pulse;\n\n    const idealGate = QTool.evalGate(plain, theta, phi, 0, 0);\n    const errorList = QTool.createErrorList(error);\n\n    const fidelityList: { fidelity: number; pleIdx: number; oreIdx: number }[] = [];\n    errorList.forEach((row, pleIdx) => {\n      row.forEach((error, oreIdx) => {\n        const { ple, ore } = error;\n        const gate = QTool.evalGate(CompositeGate, theta, phi, ple, ore);\n        fidelityList.push({\n          fidelity: gate.fidelity(idealGate),\n          pleIdx,\n          oreIdx,\n        });\n      });\n    });\n    return { errorList, fidelityList };\n  }\n\n  static createFidelityMap({\n    target,\n    gateName,\n    theta,\n    phi,\n    width,\n    height,\n    threshold = 0.9999,\n    fillStyle = (val) => `rgb(${val}, ${val}, ${val})`,\n    overFill = 1,\n    error = {\n      ple: { min: -0.1, max: 0.1, step: 0.005 },\n      ore: { min: -0.1, max: 0.1, step: 0.005 }\n    }\n  }: {\n    target: Target;\n    gateName: string;\n    theta: number;\n    phi: number;\n    width: number;\n    height: number;\n    threshold?: number;\n    fillStyle?: (val: number) => string;\n    overFill?: number;\n    error?: { ple: { min: number; max: number; step: number }; ore: { min: number; max: number; step: number } };\n  }) {\n    const { errorList, fidelityList } = QTool.calculateFidelity(gateName, theta, phi, error)\n\n    const pleMesh = height / errorList.length;\n    const oreMesh = width / errorList[0].length;\n    const { canvas, ctx, clearCanvas } = QTool.createCanvas2D(target, { width, height });\n    clearCanvas();\n\n    if (ctx) {\n      fidelityList.forEach(({ fidelity, pleIdx, oreIdx }) => {\n        const colorValue = Math.floor(((Math.max(fidelity, threshold) - threshold) / (1 - threshold)) * 255);\n        ctx.fillStyle = fillStyle(colorValue);\n        ctx.fillRect(oreIdx * oreMesh - overFill / 2, pleIdx * pleMesh - overFill / 2, oreMesh + overFill, pleMesh + overFill);\n      });\n    }\n  }\n\n  static drawBloch(create: any, {\n    ringWeight = 0.01,\n    ringNum = { azimuthal: 7, polar: 8 },\n    color = {\n      sphere: 0x888888,\n      ringMain: 0x5555ff,\n      ringSub: 0xffffff,\n    }\n  }: {\n    ringWeight?: number;\n    ringNum?: { azimuthal: number; polar: number };\n    color?: { sphere: number; ringMain: number; ringSub: number };\n  } = {}) {\n    const Bloch = create.group({\n      children: [\n        create.sphere({\n          option: {\n            transparent: true,\n            opacity: 0.5,\n            color: color.sphere,\n          },\n          autoAdd: false\n        }),\n        create.group({\n          children:\n            new Array(ringNum.polar).fill(0).map((_, i) => {\n              create.cylinder({\n                size: [1, 1, ringWeight],\n                segments: [128, 1],\n                rotation: [Math.PI / 2, 0, i * Math.PI / ringNum.polar],\n                openEnded: true,\n                option: {\n                  side: 2,\n                  color: (i === 0 || (i === ringNum.polar / 2)) ? color.ringMain : color.ringSub,\n                },\n                autoAdd: true\n              })\n            }),\n          autoAdd: false\n        }),\n        create.group({\n          children:\n            new Array(ringNum.azimuthal).fill(0).map((_, i) => {\n              const theta = ((i + 1) / (ringNum.azimuthal + 1)) * Math.PI;\n              const r = Math.sin(theta);\n              create.cylinder({\n                size: [r, r, ringWeight],\n                segments: [128, 1],\n                position: [0, Math.cos(theta), 0],\n                openEnded: true,\n                option: {\n                  side: 2,\n                  color: (ringNum.azimuthal % 2 !== 0 && i === ~~(ringNum.azimuthal / 2)) ? color.ringMain : color.ringSub,\n                },\n                autoAdd: true\n              })\n            }),\n          autoAdd: false\n        })\n      ]\n    })\n  }\n\n  static createAnimation({\n    init,\n    target,\n    pulseName,\n    angle,\n    phi,\n    initState,\n    speed,\n    draggable = true,\n    light = {\n      ambient: { intensity: 0.4 },\n      directional: { intensity: 0.6, position: [-10, 10, -10] },\n    },\n    bloch = {\n      ringWeight: 0.01,\n      ringNum: { azimuthal: 7, polar: 8 },\n      color: {\n        sphere: 0x888888,\n        ringMain: 0x5555ff,\n        ringSub: 0xffffff,\n      }\n    },\n    point = {\n      size: {\n        normal: 0.04,\n        errorP: 0.04,\n        errorN: 0.04,\n      },\n      color: {\n        normal: 0x7777ff,\n        errorP: 0xff7777,\n        errorN: 0xffaaaa,\n      }\n    },\n    view = {\n      position: [0, 0, -2],\n    }\n  }: {\n    init: any;\n    target: Target;\n    pulseName: string;\n    angle: number;\n    phi: number;\n    initState: any;\n    speed: number;\n    draggable?: boolean;\n    light?: {\n      ambient: { intensity: number };\n      directional: { intensity: number; position: [number, number, number] };\n    };\n    bloch?: {\n      ringWeight?: number;\n      ringNum?: { azimuthal: number; polar: number };\n      color?: { sphere: number; ringMain: number; ringSub: number };\n    };\n    point?: {\n      size?: { normal: number; errorP: number; errorN: number };\n      color?: { normal: number; errorP: number; errorN: number };\n    };\n    view?: { position: [number, number, number] };\n  }): {\n    create: any;\n    camera: any;\n    controls: any;\n    animate: any;\n    helper: any;\n    destroy: any;\n  } {\n    const pulses = CPList[pulseName].pulse.map(p => ({\n      theta: p.theta(angle, phi),\n      phi: p.phi(angle, phi),\n    }));\n    let currentState = initState;\n    let eState = [\n      initState, initState\n    ]\n\n    const { create, camera, controls, animate, helper, destroy } = init(target);\n\n    camera.position.set(...view.position);\n    if (draggable) {\n      controls.connect();\n    }\n\n    create.ambientLight({ intensity: light.ambient.intensity });\n    const directionalLight = create.directionalLight({\n      intensity: light.directional.intensity,\n      position: light.directional.position,\n    });\n    directionalLight.shadow.bias = -0.0001;\n\n    helper.axes({ size: 1 })\n\n    QTool.drawBloch(create, {\n      ringWeight: bloch.ringWeight,\n      ringNum: bloch.ringNum,\n      color: bloch.color,\n    });\n\n    const idealPoint = create.sphere({\n      size: point?.size?.normal ?? 0.04,\n      position: [0, 1, 0],\n      option: {\n        color: point?.color?.normal ?? 0x7777ff,\n      },\n    })\n    const errorPoint = [\n      create.sphere({\n        size: point?.size?.errorP ?? 0.04,\n        position: [0, 1, 0],\n        option: {\n          color: point?.color?.errorP ?? 0xff7777,\n        },\n      }),\n      create.sphere({\n        size: point?.size?.errorN ?? 0.04,\n        position: [0, 1, 0],\n        option: {\n          color: point?.color?.errorN ?? 0xffaaaa,\n        },\n      })\n    ]\n\n\n    let mode = 0;\n    let counter = 0;\n    const waitTime = [1, 2];\n    let currentTheta = 0;\n    let gateIndex = 0;\n    const ple = 0.05, ore = 0.05;\n    animate(({ delta }: { delta: number }) => {\n      switch (mode) {\n        case 0: // wait before start\n          counter += delta;\n          if (counter >= waitTime[0]) {\n            mode = 1;\n            counter = 0;\n          }\n          return;\n        case 1: // gate operation\n          break;\n        case 2: // wait after end\n          counter += delta;\n          if (counter >= waitTime[1]) {\n            mode = 0;\n            counter = 0;\n            //point.position.set(0, 1, 0);\n            currentState = initState;\n          }\n          return;\n      }\n      let dTheta = delta * speed;\n      let flag = false;\n      if (currentTheta + dTheta > pulses[gateIndex].theta) {\n        dTheta = pulses[gateIndex].theta - currentTheta;\n        flag = true;\n      }\n      const g = new QGate(dTheta, [Math.cos(pulses[gateIndex].phi), Math.sin(pulses[gateIndex].phi), 0]);\n      const eg = [\n        new QGate((1 + ple) * dTheta, [Math.cos(pulses[gateIndex].phi), Math.sin(pulses[gateIndex].phi), ore]),\n        new QGate((1 - ple) * dTheta, [Math.cos(pulses[gateIndex].phi), Math.sin(pulses[gateIndex].phi), -ore]),\n      ]\n      currentState = g.apply(currentState);\n      eState = eState.map((st, i) => eg[i].apply(st));\n      const xyz = currentState.xyz;\n      const Exyz = eState.map(st => st.xyz);\n      idealPoint.position.set(xyz.x, xyz.z, xyz.y);\n      errorPoint[0].position.set(Exyz[0].x, Exyz[0].z, Exyz[0].y);\n      errorPoint[1].position.set(Exyz[1].x, Exyz[1].z, Exyz[1].y);\n      currentTheta += dTheta;\n      if (flag) {\n        gateIndex++;\n        currentTheta = 0;\n        if (gateIndex >= pulses.length) {\n          gateIndex = 0;\n          currentState = initState;\n          eState = [initState, initState];\n          mode = 2;\n        }\n      }\n    });\n    return { create, camera, controls, animate, helper, destroy };\n  }\n}\n"]}